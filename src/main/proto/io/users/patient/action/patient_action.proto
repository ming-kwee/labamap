syntax = "proto3";
package io.users.patient.action;

option java_outer_classname = "PatientAction";

import "io/users/patient/api/patient_api.proto";
import "io/users/patient/domain/patient_domain.proto";
import "kalix/annotations.proto";

service PatientStateSubscription {
    option (kalix.codegen) = {
      action: {}
    };
  
    rpc OnStateChange (patient.domain.PatientState) returns (patient.api.Patient) {
      option (kalix.method).eventing.in = {
        value_entity: "patients"
      };
      option (kalix.method).eventing.out = {
        topic: "patient_changes"
      };
    }
  }